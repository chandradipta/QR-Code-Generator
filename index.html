<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>QR Code Generator</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      transition: background 0.3s, color 0.3s;
    }
    .container {
      background: linear-gradient(90deg, #f4a261 0%, #e76f51 100%);
    }
    .dark-mode .container {
      background: linear-gradient(90deg, #264653 0%, #2a9d8f 100%);
    }
    .panel {
      background-color: rgba(255, 255, 255, 0.15);
      padding: 1rem;
      border-radius: 1rem;
    }
    .dark-mode .panel {
      background-color: rgba(0,0,0,0.3);
    }
    .input-field {
      background-color: rgba(255,255,255,0.7);
      color: #333;
      padding: 0.5rem;
      border-radius: 0.5rem;
      border: none;
      outline: none;
    }
    .input-field:focus {
      outline: 2px solid #264653;
    }
    .btn {
      background-color: #e9c46a;
      color: #333;
      font-weight: bold;
      transition: all 0.2s ease;
    }
    .btn:hover {
      background-color: #f4a261;
      transform: scale(1.05);
    }
    .preview-frame {
      background-color: #fff;
      border-radius: 1rem;
      padding: 1rem;
      text-align: center;
    }
    .dark-mode .preview-frame {
      background-color: #222;
      color: white;
    }
    .drag-area {
      border: 2px dashed #ccc;
      padding: 1rem;
      border-radius: 0.5rem;
      text-align: center;
      cursor: pointer;
      transition: background 0.3s;
    }
    .drag-area.dragover {
      background: rgba(0,0,0,0.1);
    }
  </style>
</head>
<body class="min-h-screen flex items-center justify-center container">
  <div class="grid md:grid-cols-2 grid-cols-1 gap-6 w-11/12 max-w-5xl">

    <!-- Left Panel -->
    <div class="panel">
      <h1 class="text-2xl font-bold mb-4 text-white">QR Code Generator</h1>

      <!-- Theme Toggle -->
      <button id="themeToggle" class="btn px-3 py-2 rounded-lg mb-4">🌙</button>

      <div class="mb-4">
        <label class="block text-white mb-1" for="title">Your Title</label>
        <input type="text" id="title" placeholder="Enter Title" class="input-field w-full" />
      </div>
      <div class="mb-4">
        <label class="block text-white mb-1" for="website">Your Website</label>
        <input type="url" id="website" placeholder="https://example.com" class="input-field w-full" />
      </div>

      <!-- Logo Upload -->
      <div class="mb-4 flex items-center flex-wrap">
        <input type="checkbox" id="addLogo" class="mr-2" />
        <label for="addLogo" class="text-white">Add Logo</label>
        <div class="drag-area ml-4 hidden" id="logoDrop">
          Drag & Drop Logo<input type="file" id="logoFile" accept="image/*" class="hidden" />
        </div>
      </div>

      <div class="mb-4">
        <label class="block text-white mb-1" for="link">Your Link</label>
        <input type="url" id="link" placeholder="Enter link" class="input-field w-full" />
      </div>

      <!-- QR & Background Color Section -->
      <div class="mb-4 grid grid-cols-2 gap-4">
        <div>
          <label class="block text-white mb-1" for="qrColor">QR Code Color</label>
          <input type="color" id="qrColor" value="#000000" class="input-field w-full h-12 cursor-pointer" />
        </div>
        <div>
          <label class="block text-white mb-1" for="qrBgColor">Background Color</label>
          <input type="color" id="qrBgColor" value="#ffffff" class="input-field w-full h-12 cursor-pointer" />
        </div>
      </div>

      <!-- Error Correction -->
      <div class="mb-4">
        <label class="block text-white mb-1" for="qrError">Error Correction</label>
        <select id="qrError" class="input-field w-full">
          <option value="L">Low</option>
          <option value="M" selected>Medium</option>
          <option value="Q">Quartile</option>
          <option value="H">High</option>
        </select>
      </div>

      <button id="generateBtn" class="btn px-4 py-2 rounded-lg mr-2">Generate QR Code</button>
    </div>

    <!-- Right Panel -->
    <div class="panel flex items-center justify-center">
      <div class="preview-frame w-full">
        <div id="previewTitle" class="preview-title">Your Title Here</div>
        <canvas id="qrcodeCanvas"></canvas>
        <div id="previewWebsite" class="preview-url">Your website here</div>

        <!-- Option Buttons -->
        <div class="flex justify-center gap-3 mt-4 flex-wrap">
          <button id="toggleColorBtn" class="btn px-3 py-2 rounded-lg">Show Color</button>
          <button id="resetBtn" class="btn px-3 py-2 rounded-lg">Reset</button>
          <button id="downloadBtn" class="btn px-3 py-2 rounded-lg">Download PNG</button>
          <button id="downloadPdfBtn" class="btn px-3 py-2 rounded-lg">Download PDF</button>
          <button id="downloadSvgBtn" class="btn px-3 py-2 rounded-lg">Download SVG</button>
        </div>
      </div>
    </div>
  </div>

<script>
  const titleInput = document.getElementById('title');
  const websiteInput = document.getElementById('website');
  const linkInput = document.getElementById('link');
  const logoCheckbox = document.getElementById('addLogo');
  const logoFileInput = document.getElementById('logoFile');
  const qrColorInput = document.getElementById('qrColor');
  const qrBgColorInput = document.getElementById('qrBgColor');
  const qrErrorInput = document.getElementById('qrError');

  const previewTitle = document.getElementById('previewTitle');
  const previewWebsite = document.getElementById('previewWebsite');
  const canvas = document.getElementById('qrcodeCanvas');
  const ctx = canvas.getContext("2d");

  let lastLink = "https://example.com";

  // Theme Toggle
  const themeToggle = document.getElementById("themeToggle");
  function updateThemeButton() {
    themeToggle.textContent = document.body.classList.contains("dark-mode") ? "☀️" : "🌙";
  }
  themeToggle.addEventListener("click", () => {
    document.body.classList.toggle("dark-mode");
    localStorage.setItem("theme", document.body.classList.contains("dark-mode") ? "dark" : "light");
    updateThemeButton();
  });
  if(localStorage.getItem("theme")==="dark") document.body.classList.add("dark-mode");
  updateThemeButton();

  // Drag & drop helpers
  function setupDragAndDrop(dropArea, fileInput) {
    dropArea.addEventListener("click", () => fileInput.click());
    dropArea.addEventListener("dragover", e => {
      e.preventDefault();
      dropArea.classList.add("dragover");
    });
    dropArea.addEventListener("dragleave", () => dropArea.classList.remove("dragover"));
    dropArea.addEventListener("drop", e => {
      e.preventDefault();
      dropArea.classList.remove("dragover");
      fileInput.files = e.dataTransfer.files;
    });
  }
  setupDragAndDrop(document.getElementById("logoDrop"), logoFileInput);

  logoCheckbox.addEventListener('change', () => {
    document.getElementById("logoDrop").classList.toggle('hidden', !logoCheckbox.checked);
  });

  // Generate QR
  document.getElementById('generateBtn').addEventListener('click', async () => {
    const title = titleInput.value || "Your Title Here";
    const website = websiteInput.value || "https://example.com";
    const link = linkInput.value || website;
    const qrColor = qrColorInput.value;
    const qrBgColor = qrBgColorInput.value;
    const errorLevel = qrErrorInput.value;

    if (!/^https?:\/\//.test(link)) {
      alert("Please enter a valid URL (must start with http:// or https://)");
      return;
    }

    lastLink = link;
    previewTitle.textContent = title;
    previewWebsite.textContent = website;

    await QRCode.toCanvas(canvas, link, {
      width: 200,
      margin: 2,
      color: { dark: qrColor, light: qrBgColor },
      errorCorrectionLevel: errorLevel
    });

    if (logoCheckbox.checked && logoFileInput.files[0]) {
      const reader = new FileReader();
      reader.onload = e => {
        const logoImg = new Image();
        logoImg.src = e.target.result;
        logoImg.onload = () => {
          const size = canvas.width * 0.2;
          const x = (canvas.width - size) / 2;
          const y = (canvas.height - size) / 2;
          ctx.drawImage(logoImg, x, y, size, size);
        };
      };
      reader.readAsDataURL(logoFileInput.files[0]);
    }
  });

  // Toggle color
  document.getElementById("toggleColorBtn").addEventListener("click", async () => {
    const currentColor = qrColorInput.value;
    const inverted = currentColor === "#000000" ? "#ff0000" : "#000000";
    await QRCode.toCanvas(canvas, lastLink, {
      width: 200,
      margin: 2,
      color: { dark: inverted, light: qrBgColorInput.value },
      errorCorrectionLevel: qrErrorInput.value
    });
    qrColorInput.value = inverted;
  });

  // Reset
  document.getElementById("resetBtn").addEventListener("click", () => {
    titleInput.value = "";
    websiteInput.value = "";
    linkInput.value = "";
    previewTitle.textContent = "Your Title Here";
    previewWebsite.textContent = "Your website here";
    qrColorInput.value = "#000000";
    qrBgColorInput.value = "#ffffff";
    qrErrorInput.value = "M";
    QRCode.toCanvas(canvas, "https://example.com", {
      width: 200,
      margin: 2,
      color: { dark: "#000000", light: "#ffffff" },
      errorCorrectionLevel: "M"
    });
  });

  // Download PNG
  document.getElementById("downloadBtn").addEventListener("click", () => {
    const link = document.createElement("a");
    link.download = "qrcode.png";
    link.href = canvas.toDataURL("image/png");
    link.click();
  });

  // Download PDF
  document.getElementById("downloadPdfBtn").addEventListener("click", () => {
    const { jsPDF } = window.jspdf;
    const pdf = new jsPDF();
    pdf.addImage(canvas.toDataURL("image/png"), "PNG", 30, 30, 150, 150);
    pdf.save("qrcode.pdf");
  });

  // Download SVG
  document.getElementById("downloadSvgBtn").addEventListener("click", async () => {
    const svg = await QRCode.toString(lastLink, { type: "svg", errorCorrectionLevel: qrErrorInput.value });
    const blob = new Blob([svg], { type: "image/svg+xml" });
    const url = URL.createObjectURL(blob);
    const a = document.createElement("a");
    a.href = url;
    a.download = "qrcode.svg";
    a.click();
  });
</script>
</body>
</html>

